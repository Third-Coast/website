<fieldset class="responsive edges container">
  <legend class="caps-lock">Edges</legend>
  <p class="info padded">Edges are links between two discrete elements. 'Inside Edges' mean that this item is responsible for the relationship. 'Outside Edges' mean that the item listed is responsible.</p>
  
  <div class="group left outside">
    <h3 class="margins">Managed By</h3>
    <!-- iterate references -->
    <!-- insert views/forms/partials/edge-outside.html -->
    <a class="showmodal button margins" href="[/manage/edge/$item:_model/outside/$item:@id]">+ Add Outside Edge</a>  
  </div>
  
  <div class="group left inside dnd">
    <h3 class="margins">Responsible For</h3>
    <!-- iterate edges -->
    <!-- insert views/forms/partials/edge-inside.html -->
    <a class="showmodal button margins" href="[/manage/edge/$item:_model/inside/$item:@id]">+ Add Inside Edge</a>  
  </div>
  
  <script type="text/javascript">
    // <![CDATA[
      bloc.prepare(function () {
        document.querySelectorAll('a.showmodal.button').forEach(function (button) {
          button.addEventListener('click', function (evt) {
            evt.preventDefault();
            var button = this;
            
            new Modal.Form(this.href + '.xml', {}, function (response) {
              button.parentNode.insertBefore(response.querySelector("dl.listed.container"), button);
              // close modal
              this.modal.close(function () {
                // destroy the object if we need more closure;
              });
            });
            
            
          });
        });
        
        // Sorts
        sortable('div.inside.dnd', 'dl');
                
        
      });
    // ]]>
  </script>
</fieldset>